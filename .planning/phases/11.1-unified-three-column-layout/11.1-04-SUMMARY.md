---
phase: 11.1-unified-three-column-layout
plan: 04
subsystem: ui
tags: [react, navigation, breadcrumb, event-wiring, keyboard-shortcuts]

# Dependency graph
requires:
  - phase: 11.1-01
    provides: DetailPane selection store with navigation history
  - phase: 11.1-02
    provides: WorkspaceSummaryView and FileDetailView components
  - phase: 11.1-03
    provides: ChangelistDetailView and RevisionDetailView components
provides:
  - DetailBreadcrumb navigation component
  - FileTree click handlers that update detail pane selection
  - ChangelistPanel click handlers that update detail pane selection
  - Escape key navigation support
  - Clickable breadcrumb segments for direct navigation jumps
affects: [11.1-05]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Breadcrumb navigation with back button and clickable segments"
    - "Global keyboard shortcut (Escape) for back navigation"
    - "Click handlers integrated into existing node renderers without replacing behavior"

key-files:
  created:
    - src/components/DetailPane/DetailBreadcrumb.tsx
  modified:
    - src/components/DetailPane/DetailPane.tsx
    - src/components/FileTree/FileNode.tsx
    - src/components/ChangelistPanel/ChangelistNode.tsx

key-decisions:
  - "Breadcrumb hides for workspace summary (no navigation path when selection.type === 'none')"
  - "Escape key listener added to DetailPane, not breadcrumb component"
  - "Side column clicks preserve existing behavior (expand/collapse, drag-drop, context menus)"
  - "File clicks call selectFile(), CL header clicks call selectChangelist()"

patterns-established:
  - "Breadcrumb segments built from history + current selection"
  - "Segment clicks trim history and navigate to that point"
  - "Escape key falls back to clear() if no history"

# Metrics
duration: 3min
completed: 2026-01-31
---

# Phase 11.1 Plan 04: Side Column Wiring and Breadcrumb Navigation Summary

**Interactive three-column layout with breadcrumb navigation and side column click handlers driving detail pane selection**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-31T18:53:16Z
- **Completed:** 2026-01-31T18:56:21Z
- **Tasks:** 2
- **Files modified:** 4

## Accomplishments

- DetailBreadcrumb component showing navigation path with back button and clickable segments
- FileTree file clicks now update detail pane via selectFile()
- ChangelistPanel CL header clicks update detail pane via selectChangelist()
- ChangelistPanel file row clicks update detail pane with parent CL context
- Escape key navigation support (goBack if history exists, else clear)
- Breadcrumb segments clickable for direct navigation jumps
- All existing FileTree and ChangelistPanel behavior preserved (expand/collapse, drag-drop, context menus)

## Task Commits

Each task was committed atomically:

1. **Task 1: Create DetailBreadcrumb and wire into DetailPane** - `76a0d44` (feat)
2. **Task 2: Wire file tree and changelist panel selections to detail pane store** - `67c655f` (feat)

## Files Created/Modified

- `src/components/DetailPane/DetailBreadcrumb.tsx` - Navigation bar with back button, clickable segments, and dynamic segment labels
- `src/components/DetailPane/DetailPane.tsx` - Added breadcrumb component and Escape key handler for back navigation
- `src/components/FileTree/FileNode.tsx` - File click handler calls selectFile() to update detail pane
- `src/components/ChangelistPanel/ChangelistNode.tsx` - CL header and file row click handlers call selectChangelist() and selectFile()

## Decisions Made

**Breadcrumb visibility:**
- Breadcrumb only renders when `selection.type !== 'none'` - workspace summary has no navigation path, so breadcrumb is hidden

**Escape key placement:**
- Keyboard shortcut handler added to DetailPane component (via useEffect with window.addEventListener), not in breadcrumb component
- This ensures Escape works even when breadcrumb is not rendered (workspace summary state)

**Click handler integration:**
- FileNode onClick modified to handle both folders (toggle) and files (selectFile)
- ChangelistNode onClick modified to handle both CL headers (toggle + selectChangelist) and file rows (selectFile with parent CL ID)
- All existing behavior preserved: expand/collapse, drag-drop, context menus remain functional

**Breadcrumb segment navigation:**
- Clicking a segment navigates to that selection and truncates history to items before it
- Current segment (last in array) is bold and not clickable
- Back button disabled when history is empty

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

**Ready for next phase:**
- Three-column layout is fully interactive
- Side columns drive detail pane selection
- Breadcrumb shows navigation context with back support
- Escape key provides keyboard navigation
- All existing UI functionality intact (drag-drop, context menus, expand/collapse)
- TypeScript compilation clean

**Notes:**
- Plan 11.1-05 will add any remaining polish or integration work
- The three-column layout pattern is now complete and ready for user testing

---
*Phase: 11.1-unified-three-column-layout*
*Completed: 2026-01-31*
