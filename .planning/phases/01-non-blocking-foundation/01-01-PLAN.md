---
phase: 01-non-blocking-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src-tauri/Cargo.toml
  - src-tauri/tauri.conf.json
  - src-tauri/capabilities/default.json
  - src-tauri/src/lib.rs
  - src/App.tsx
  - src/main.tsx
  - components.json
  - tailwind.config.js
autonomous: true

must_haves:
  truths:
    - "Tauri app builds and launches without errors"
    - "React frontend renders in Tauri window"
    - "shadcn/ui components can be imported and used"
    - "Shell plugin is enabled for process spawning"
  artifacts:
    - path: "package.json"
      provides: "Frontend dependencies configuration"
      contains: "@tanstack/react-query"
    - path: "src-tauri/Cargo.toml"
      provides: "Rust dependencies configuration"
      contains: "tauri-plugin-shell"
    - path: "src-tauri/tauri.conf.json"
      provides: "Tauri app configuration"
      contains: "shell"
    - path: "components.json"
      provides: "shadcn/ui configuration"
  key_links:
    - from: "src/main.tsx"
      to: "src/App.tsx"
      via: "React root render"
      pattern: "createRoot.*App"
---

<objective>
Scaffold Tauri 2.0 + React 19 application with all required dependencies

Purpose: Establish the project foundation with correct tooling before implementing async architecture
Output: Runnable Tauri app with React frontend, TanStack Query, Zustand, shadcn/ui, and shell plugin configured
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-non-blocking-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Tauri 2.0 + React project</name>
  <files>
    package.json
    src-tauri/Cargo.toml
    src-tauri/tauri.conf.json
    src-tauri/src/lib.rs
    src-tauri/src/main.rs
    src/App.tsx
    src/main.tsx
    vite.config.ts
    tsconfig.json
    index.html
  </files>
  <action>
    Create new Tauri 2.0 project using create-tauri-app:

    ```bash
    npm create tauri-app@latest . -- --template react-ts --manager npm
    ```

    This creates:
    - Vite + React 19 frontend
    - Tauri 2.0 backend
    - TypeScript configuration
    - Basic project structure

    If create-tauri-app prompts interactively, provide: project name "p4now", frontend "React", variant "TypeScript".

    After scaffolding, verify structure exists:
    - src-tauri/src/lib.rs with tauri::generate_handler!
    - src-tauri/Cargo.toml with tauri dependency
    - package.json with @tauri-apps/api
  </action>
  <verify>
    ls src-tauri/src/lib.rs && ls package.json && ls src/App.tsx
  </verify>
  <done>Tauri + React project scaffold exists with correct structure</done>
</task>

<task type="auto">
  <name>Task 2: Install core dependencies and configure shell plugin</name>
  <files>
    package.json
    src-tauri/Cargo.toml
    src-tauri/tauri.conf.json
    src-tauri/capabilities/default.json
    src-tauri/src/lib.rs
  </files>
  <action>
    Install frontend dependencies per RESEARCH.md standard stack:

    ```bash
    npm install @tanstack/react-query zustand
    npm install @tauri-apps/plugin-shell
    npm install react-hot-toast
    npm install -D tailwindcss postcss autoprefixer
    ```

    Add Rust shell plugin to Cargo.toml dependencies:

    ```bash
    cd src-tauri && cargo add tauri-plugin-shell
    ```

    Enable shell plugin in src-tauri/src/lib.rs:

    ```rust
    pub fn run() {
        tauri::Builder::default()
            .plugin(tauri_plugin_shell::init())
            .run(tauri::generate_context!())
            .expect("error while running tauri application");
    }
    ```

    Configure shell permissions in src-tauri/capabilities/default.json:
    - Add "shell:allow-spawn" permission
    - Add "shell:allow-execute" permission
    - Add "shell:allow-open" permission

    Ensure tauri.conf.json has shell plugin in plugins section.

    IMPORTANT: Tauri 2.0 uses capabilities system. Create src-tauri/capabilities/default.json if it doesn't exist with proper shell permissions.
  </action>
  <verify>
    grep "tauri-plugin-shell" src-tauri/Cargo.toml && grep "@tauri-apps/plugin-shell" package.json && grep "shell" src-tauri/capabilities/default.json
  </verify>
  <done>Shell plugin configured in Rust and frontend with proper capabilities</done>
</task>

<task type="auto">
  <name>Task 3: Initialize Tailwind CSS and shadcn/ui</name>
  <files>
    tailwind.config.js
    postcss.config.js
    src/index.css
    components.json
    src/lib/utils.ts
  </files>
  <action>
    Initialize Tailwind CSS:

    ```bash
    npx tailwindcss init -p
    ```

    Configure tailwind.config.js for React + shadcn/ui:

    ```javascript
    /** @type {import('tailwindcss').Config} */
    export default {
      darkMode: ["class"],
      content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
      theme: {
        extend: {},
      },
      plugins: [],
    }
    ```

    Add Tailwind directives to src/index.css:

    ```css
    @tailwind base;
    @tailwind components;
    @tailwind utilities;
    ```

    Initialize shadcn/ui (creates components.json and lib/utils.ts):

    ```bash
    npx shadcn@latest init --defaults
    ```

    Install shadcn/ui components needed for this phase:

    ```bash
    npx shadcn@latest add collapsible
    npx shadcn@latest add progress
    ```

    NOTE: shadcn init may prompt for configuration. Use defaults:
    - Style: Default
    - Base color: Slate
    - CSS variables: Yes
    - tailwind.config location: tailwind.config.js
    - Components location: @/components
    - Utils location: @/lib/utils
  </action>
  <verify>
    ls components.json && ls src/lib/utils.ts && ls src/components/ui/collapsible.tsx
  </verify>
  <done>Tailwind CSS and shadcn/ui configured with collapsible and progress components</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Build check:
   ```bash
   npm run build
   ```
   Should complete without errors.

2. Dev server check:
   ```bash
   npm run tauri dev
   ```
   Should launch Tauri window with React app (exit after confirming).

3. Dependency verification:
   - package.json contains: @tanstack/react-query, zustand, @tauri-apps/plugin-shell, react-hot-toast
   - Cargo.toml contains: tauri-plugin-shell
   - components.json exists (shadcn/ui configured)
</verification>

<success_criteria>
- Tauri 2.0 + React 19 app scaffolded and builds successfully
- All dependencies from RESEARCH.md standard stack installed
- Shell plugin configured with proper capabilities for p4.exe spawning
- shadcn/ui initialized with collapsible and progress components
- npm run tauri dev launches application window
</success_criteria>

<output>
After completion, create `.planning/phases/01-non-blocking-foundation/01-01-SUMMARY.md`
</output>
