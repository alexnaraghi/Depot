---
phase: 27-application-rename
plan: 02
type: execute
wave: 2
depends_on: ["27-01"]
files_modified:
  - e2e/wdio.conf.ts
  - e2e/test/helpers/seed-settings.ts
autonomous: true

must_haves:
  truths:
    - "E2E tests reference correct binary name (depot.exe)"
    - "E2E tests seed settings to correct app data directory (com.depot.app)"
  artifacts:
    - path: "e2e/wdio.conf.ts"
      provides: "WebDriver binary path"
      contains: "depot.exe"
    - path: "e2e/test/helpers/seed-settings.ts"
      provides: "Settings directory path"
      contains: "com.depot.app"
  key_links:
    - from: "e2e/wdio.conf.ts"
      to: "src-tauri/target/release/depot.exe"
      via: "application path"
      pattern: "depot\\.exe"
---

<objective>
Update E2E test configuration to reference the renamed binary and settings directory.

Purpose: Ensure E2E tests can find and launch the renamed application
Output: E2E test configuration updated for "Depot" application
</objective>

<execution_context>
@C:\Users\a\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\a\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/27-application-rename/27-CONTEXT.md
@.planning/phases/27-application-rename/27-01-SUMMARY.md

Key files:
@e2e/wdio.conf.ts
@e2e/test/helpers/seed-settings.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update E2E WebDriver configuration</name>
  <files>e2e/wdio.conf.ts</files>
  <action>
    In e2e/wdio.conf.ts:
    - Change `application: join(process.cwd(), 'src-tauri', 'target', 'release', 'p4now.exe')`
      to `application: join(process.cwd(), 'src-tauri', 'target', 'release', 'depot.exe')`

    This updates the binary path that tauri-driver launches during E2E tests.
  </action>
  <verify>Run `grep "depot.exe" e2e/wdio.conf.ts` - should show the updated path</verify>
  <done>wdio.conf.ts references "depot.exe" as the application binary</done>
</task>

<task type="auto">
  <name>Task 2: Update E2E settings seeder</name>
  <files>e2e/test/helpers/seed-settings.ts</files>
  <action>
    In e2e/test/helpers/seed-settings.ts:
    - Update all comments referencing "com.a.p4now" to "com.depot.app":
      - Line with "Windows: %APPDATA%\com.a.p4now\settings.json" -> "Windows: %APPDATA%\com.depot.app\settings.json"
      - Line with "Linux: ~/.config/com.a.p4now/settings.json" -> "Linux: ~/.config/com.depot.app/settings.json"
      - Line with "macOS: ~/Library/Application Support/com.a.p4now/settings.json" -> "macOS: ~/Library/Application Support/com.depot.app/settings.json"
    - Change `const storeDir = join(appDataDir, 'com.a.p4now')` to `const storeDir = join(appDataDir, 'com.depot.app')`

    This ensures E2E tests seed settings to the correct directory that Tauri plugin-store will read from.
  </action>
  <verify>Run `grep "com.depot.app" e2e/test/helpers/seed-settings.ts` - should show updated references</verify>
  <done>seed-settings.ts references "com.depot.app" in comments and code</done>
</task>

</tasks>

<verification>
1. `grep "depot" e2e/wdio.conf.ts` shows "depot.exe" binary path
2. `grep "com.depot.app" e2e/test/helpers/seed-settings.ts` shows updated directory
3. `grep -i "p4now" e2e/` returns no matches (no stray references)
</verification>

<success_criteria>
- wdio.conf.ts references depot.exe binary
- seed-settings.ts uses com.depot.app directory
- No remaining p4now references in E2E files
</success_criteria>

<output>
After completion, create `.planning/phases/27-application-rename/27-02-SUMMARY.md`
</output>
