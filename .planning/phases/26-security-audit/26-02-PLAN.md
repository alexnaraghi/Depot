---
phase: 26-security-audit
plan: 02
type: execute
wave: 2
depends_on: ["26-01"]
files_modified:
  - .gitignore
  - .planning/phases/26-security-audit/26-02-code-review-report.md
autonomous: true

must_haves:
  truths:
    - "All source code files reviewed with no hardcoded credentials, API keys, or internal server names"
    - ".gitignore updated to prevent future credential commits (Tauri artifacts, certificates, credentials)"
    - ".planning/ directory audited and cleared for public showcase (no sensitive internal context)"
  artifacts:
    - path: ".gitignore"
      provides: "Updated ignore rules for credentials, certificates, Tauri build artifacts"
      contains: "*.pem"
    - path: ".planning/phases/26-security-audit/26-02-code-review-report.md"
      provides: "Manual code review findings and .planning audit results"
  key_links:
    - from: ".gitignore"
      to: "sensitive files"
      via: "ignore patterns"
      pattern: "credentials|certificates|.pem|.key"
---

<objective>
Perform manual code review for sensitive content, audit .planning/ directory for public showcase, and update .gitignore to prevent future credential commits.

Purpose: Complete security audit with manual verification after automated scans, ensure .planning/ is safe for public viewing
Output: Updated .gitignore, code review report documenting all findings
</objective>

<execution_context>
@C:\Users\a\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\a\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-security-audit/26-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Manual source code review for sensitive content</name>
  <files>.planning/phases/26-security-audit/26-02-code-review-report.md</files>
  <action>
    Run grep patterns to find potential sensitive content in source files.
    Document each finding with determination (safe/unsafe).

    **Search patterns to run:**

    1. IP addresses (potential internal servers):
       ```
       grep -rn --include="*.ts" --include="*.tsx" --include="*.rs" --include="*.json" "\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b" src/ src-tauri/
       ```

    2. Hardcoded server names:
       ```
       grep -rn --include="*.ts" --include="*.tsx" --include="*.rs" "perforce\." src/ src-tauri/
       grep -rn --include="*.ts" --include="*.tsx" --include="*.rs" "ssl:" src/ src-tauri/
       ```

    3. API keys and tokens:
       ```
       grep -rn --include="*.ts" --include="*.tsx" --include="*.rs" -i "api[_-]?key\|secret\|token\|password" src/ src-tauri/
       ```

    4. Private keys and certificates:
       ```
       grep -rn "BEGIN.*PRIVATE\|BEGIN.*CERTIFICATE" src/ src-tauri/ .planning/
       ```

    5. Environment variable references (ensure not hardcoded):
       ```
       grep -rn "process\.env\." src/
       ```

    **Expected safe patterns (document but do not flag):**
    - `tokens` in syntax highlighting (Prism token iteration)
    - `credentials` in comments referring to P4 connection concept
    - `ssl:perforce.example.com:1666` - example placeholder
    - localhost:1420 - Tauri dev server

    **Create report with sections:**
    - Source Files Reviewed (count)
    - Patterns Searched
    - Findings (table: file, line, pattern, determination, rationale)
    - Verdict: PASS/FAIL
  </action>
  <verify>
    Run: `grep -rn --include="*.ts" --include="*.tsx" "localhost" src/ | head -5`
    Check: Only localhost:1420 (Tauri dev URL) and test fixtures
    Run: `grep -rn --include="*.rs" "127\.\|192\.\|10\.\|172\." src-tauri/`
    Check: No internal IP addresses
  </verify>
  <done>
    All source files reviewed, no hardcoded credentials or internal server names found
  </done>
</task>

<task type="auto">
  <name>Task 2: Audit .planning/ directory for public showcase</name>
  <files>.planning/phases/26-security-audit/26-02-code-review-report.md</files>
  <action>
    The .planning/ directory will be kept public as showcase of agentic development.
    Audit all files for sensitive internal context that should not be public.

    **Sensitive content to look for:**
    1. Internal company names (beyond generic "Perforce")
    2. Real server addresses or IP addresses
    3. Employee names or personal identifiers
    4. Internal project codenames
    5. Proprietary methodology references
    6. Credentials or API keys in research notes

    **Search commands:**
    ```
    grep -rn "\.corp\|\.internal\|\.local" .planning/
    grep -rn "@.*\.com" .planning/  # Check for email addresses
    grep -rn --include="*.md" "\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b" .planning/
    ```

    **Known safe patterns in .planning/:**
    - `ssl:perforce.example.com:1666` - intentional example
    - `noreply@anthropic.com` - Co-Author attribution
    - References to Claude, Anthropic, GSD methodology

    **Add findings to report:**
    - .planning Files Reviewed (count)
    - Sensitive Content Found (table with remediation)
    - Public Showcase Readiness: READY/NOT READY
  </action>
  <verify>
    Run: `grep -rn "password\|secret" .planning/ | grep -v "secret scanning\|secrets\|gitleaks\|trufflehog" | head -10`
    Check: No actual passwords/secrets, only references to concept
    Run: `ls .planning/ | wc -l`
    Check: All directories documented
  </verify>
  <done>
    .planning/ directory audited, safe for public showcase
  </done>
</task>

<task type="auto">
  <name>Task 3: Update .gitignore to prevent future credential commits</name>
  <files>.gitignore</files>
  <action>
    Review current .gitignore and add missing patterns for:

    **Credentials and secrets:**
    ```
    # Credentials and secrets
    .env
    .env.*
    *.pem
    *.key
    *.p12
    *.pfx
    credentials.json
    secrets.json
    .secrets
    ```

    **Tauri build artifacts:**
    ```
    # Tauri build artifacts
    src-tauri/target/
    src-tauri/WixTools/
    src-tauri/*.nsi
    *.exe
    *.msi
    !.github/workflows/*.exe  # Allow in workflow if needed
    ```

    **OS and IDE files:**
    ```
    # OS files
    Thumbs.db
    desktop.ini
    .Spotlight-V100
    .Trashes

    # IDE
    *.swp
    *.swo
    *~
    ```

    **Testing artifacts:**
    ```
    # Test artifacts
    coverage/
    .nyc_output/
    *.lcov
    ```

    Preserve existing entries (logs, node_modules, dist, .vscode, etc.).
    Add clear section comments for organization.
  </action>
  <verify>
    Run: `grep -E "\.env|\.pem|\.key|credentials" .gitignore`
    Check: All credential patterns present
    Run: `grep "src-tauri/target" .gitignore`
    Check: Tauri target directory ignored
    Run: `git status --porcelain | grep -E "\.env|\.pem"`
    Check: No sensitive files in git status (would indicate they exist but are now ignored)
  </verify>
  <done>
    .gitignore updated with comprehensive patterns for credentials, certificates, and build artifacts
  </done>
</task>

</tasks>

<verification>
1. Code review report exists documenting all grep searches and findings
2. .planning/ directory audit completed with public showcase determination
3. .gitignore contains credential/certificate patterns
4. No ACTION_NEEDED items from code review
5. Combined with Plan 01 results, repository is confirmed safe for public release
</verification>

<success_criteria>
- Manual code review finds no hardcoded credentials or internal server names
- .planning/ directory cleared for public showcase (no sensitive internal context)
- .gitignore prevents future credential commits with comprehensive patterns
- Phase 26 complete: Repository is safe for public release on GitHub
</success_criteria>

<output>
After completion, create `.planning/phases/26-security-audit/26-02-SUMMARY.md`
</output>
