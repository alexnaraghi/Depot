---
phase: 08-visual-polish
plan: 03
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - src/components/FileTree/FileTree.tsx
  - src/components/ChangelistPanel/ChangelistPanel.tsx
  - src/components/SearchResultsPanel.tsx
  - src/components/OutputPanel.tsx
  - src/components/StatusBar.tsx
  - src/App.css
autonomous: true

must_haves:
  truths:
    - "Async operations show skeleton placeholders instead of blank areas"
    - "Empty states show muted text messages (no icons)"
    - "Section headers have subtle background bar treatment"
    - "Spacing and typography are consistent across all panels"
    - "StatusBar uses semantic color variables"
  artifacts:
    - path: "src/components/FileTree/FileTree.tsx"
      provides: "Skeleton loading state and text-only empty state"
    - path: "src/components/ChangelistPanel/ChangelistPanel.tsx"
      provides: "Skeleton loading state and consistent section headers"
  key_links:
    - from: "src/components/FileTree/FileTree.tsx"
      to: "Loading/empty state rendering"
      via: "Conditional rendering based on isLoading/data.length"
      pattern: "animate-pulse|skeleton"
---

<objective>
Add skeleton loading states, text-only empty states, section header bar treatment, and consistent spacing across all panels and views. Clean up legacy App.css.

Purpose: Completes the professional polish — loading states prevent blank areas, empty states guide the user, and consistent spacing creates visual harmony.
Output: All panels have loading skeletons, empty states, and consistent styling.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-visual-polish/08-CONTEXT.md
@.planning/phases/08-visual-polish/08-RESEARCH.md
@.planning/phases/08-visual-polish/08-01-SUMMARY.md

@src/components/FileTree/FileTree.tsx
@src/components/ChangelistPanel/ChangelistPanel.tsx
@src/components/SearchResultsPanel.tsx
@src/components/OutputPanel.tsx
@src/components/StatusBar.tsx
@src/App.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Skeleton loading states and text-only empty states</name>
  <files>src/components/FileTree/FileTree.tsx, src/components/ChangelistPanel/ChangelistPanel.tsx, src/components/SearchResultsPanel.tsx</files>
  <action>
For each component that loads async data, replace any existing loading spinners with skeleton placeholders, and update empty states to be text-only (no icons).

**FileTree.tsx:**
- Replace the current loading state (Loader2 spinner + "Loading workspace files..." text) with a skeleton:
  ```tsx
  // Skeleton: 10 rows mimicking tree structure
  <div className="p-3 space-y-2">
    {Array.from({ length: 10 }).map((_, i) => (
      <div key={i} className="flex items-center gap-2" style={{ paddingLeft: `${(i % 3) * 16}px` }}>
        <div className="w-4 h-4 bg-slate-700 rounded animate-pulse" />
        <div className={`h-3.5 bg-slate-700 rounded animate-pulse`} style={{ width: `${60 + (i * 7) % 40}%` }} />
      </div>
    ))}
  </div>
  ```
- Replace current empty state (FolderOpen icon + "No files in workspace") with text-only:
  ```tsx
  <div className="flex items-center justify-center h-full">
    <p className="text-sm text-muted-foreground">No files in workspace</p>
  </div>
  ```

**ChangelistPanel.tsx:**
- Add skeleton loading state if it has one (check if it shows loading for changelists):
  ```tsx
  // Skeleton: 3 changelist blocks
  <div className="p-3 space-y-4">
    {Array.from({ length: 3 }).map((_, i) => (
      <div key={i} className="space-y-2">
        <div className="h-4 bg-slate-700 rounded animate-pulse w-32" />
        <div className="space-y-1 pl-4">
          <div className="h-3.5 bg-slate-700/50 rounded animate-pulse w-3/4" />
          <div className="h-3.5 bg-slate-700/50 rounded animate-pulse w-1/2" />
        </div>
      </div>
    ))}
  </div>
  ```
- Empty state for no changelists: `<p className="text-sm text-muted-foreground">No pending changelists</p>` centered
- Ensure section headers (changelist names/numbers) use background bar treatment:
  ```tsx
  <div className="bg-slate-800/50 px-3 py-1.5 border-b border-slate-700/50">
    <span className="text-xs font-semibold text-slate-300 uppercase tracking-wider">Changelist Title</span>
  </div>
  ```

**SearchResultsPanel.tsx:**
- Empty search state: text-only "No results found" in muted styling
- Loading state during search: small skeleton list
  </action>
  <verify>Run `npx tsc --noEmit`. Open app — file tree shows skeleton while loading (briefly). Empty changelist panel shows text message. Search with no results shows muted text.</verify>
  <done>All panels show skeleton placeholders during loading and text-only empty states. No spinner icons or illustration icons in empty states.</done>
</task>

<task type="auto">
  <name>Task 2: StatusBar semantic colors, spacing pass, and App.css cleanup</name>
  <files>src/components/StatusBar.tsx, src/components/OutputPanel.tsx, src/App.css</files>
  <action>
**StatusBar.tsx:**
- Replace hardcoded slate/blue/red/green colors with semantic Tailwind classes where possible:
  - Default state: `bg-slate-800` → use semantic or keep (it's the status bar, specific styling is OK)
  - Active (running): keep `bg-blue-900` but ensure it uses the refined blue from the new palette
  - Remove `transition-colors` class (per CONTEXT.md: no transitions)
- Ensure consistent text sizing (`text-xs`) and spacing

**OutputPanel.tsx:**
- Review for consistent spacing (use `p-3` or `p-4` consistently)
- Ensure section headers use background bar treatment if applicable
- Use `text-muted-foreground` for secondary text

**App.css:**
- Audit for any styles still in use. The Vite template generates default App.css with styles for `.App`, `#root`, logo animations, etc.
- If App.css only has unused Vite template styles, empty it or remove the import
- If any styles are still used, migrate them to Tailwind utilities in the components or to `index.css` base layer
- Check `src/App.tsx` or `src/main.tsx` for the App.css import and remove if file is emptied

**General spacing audit:**
- Panels should use `p-3` for content padding (comfortable GitKraken density)
- `gap-2` between related items within a section
- `gap-4` between unrelated sections
- Border colors should all use `border-slate-700` or `border-border` consistently
  </action>
  <verify>Run `npx tsc --noEmit`. Check StatusBar renders correctly in all states. Verify App.css is cleaned up. Check spacing looks consistent across panels.</verify>
  <done>StatusBar uses refined colors without transitions. App.css cleaned up. Spacing is consistent across all panels with GitKraken-level comfortable density.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. File tree shows skeleton during initial load
3. Empty changelist panel shows muted text (no icons)
4. Search empty state is text-only
5. Section headers have subtle background bar
6. StatusBar has no transition classes
7. App.css is cleaned up (empty or removed)
8. Consistent spacing across all panels
</verification>

<success_criteria>
- All async views show skeleton placeholders (not blank or spinner)
- All empty states are text-only with muted styling
- Section headers use background bar treatment
- StatusBar refined, no transitions
- App.css legacy styles cleaned up
- Consistent spacing (p-3 content, gap-2/gap-4) across panels
</success_criteria>

<output>
After completion, create `.planning/phases/08-visual-polish/08-03-SUMMARY.md`
</output>
